<!DOCTYPE html>
<html>
<head>
  <title>build.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = '../../', thisFile = 'test/browser/build.js';
  </script>
  <script src="../../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs">
          <h1>build.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1">&#182;</a>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">require</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">cwd</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">resolved</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">cwd</span> <span class="o">||</span> <span class="s1">&#39;/&#39;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">mod</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">[</span><span class="nx">resolved</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">mod</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span>
        <span class="s1">&#39;Failed to resolve module &#39;</span> <span class="o">+</span> <span class="nx">file</span> <span class="o">+</span> <span class="s1">&#39;, tried &#39;</span> <span class="o">+</span> <span class="nx">resolved</span>
    <span class="p">);</span>
    <span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">mod</span><span class="p">.</span><span class="nx">_cached</span> <span class="o">?</span> <span class="nx">mod</span><span class="p">.</span><span class="nx">_cached</span> <span class="o">:</span> <span class="nx">mod</span><span class="p">();</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">paths</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nx">require</span><span class="p">.</span><span class="nx">modules</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">require</span><span class="p">.</span><span class="nx">extensions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.js&quot;</span><span class="p">,</span><span class="s2">&quot;.coffee&quot;</span><span class="p">];</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">_core</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;assert&#39;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s1">&#39;events&#39;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s1">&#39;fs&#39;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s1">&#39;path&#39;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s1">&#39;vm&#39;</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">cwd</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">cwd</span><span class="p">)</span> <span class="nx">cwd</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="p">;</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="nx">require</span><span class="p">.</span><span class="nx">_core</span><span class="p">[</span><span class="nx">x</span><span class="p">])</span> <span class="k">return</span> <span class="nx">x</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">path</span><span class="p">();</span>
        <span class="nx">cwd</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nx">cwd</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">cwd</span> <span class="o">||</span> <span class="s1">&#39;/&#39;</span><span class="p">;</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^(?:\.\.?\/|\/)/</span><span class="p">))</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">loadAsFileSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">y</span><span class="p">,</span> <span class="nx">x</span><span class="p">))</span>
                <span class="o">||</span> <span class="nx">loadAsDirectorySync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">y</span><span class="p">,</span> <span class="nx">x</span><span class="p">));</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="k">return</span> <span class="nx">m</span><span class="p">;</span>
        <span class="p">}</span>
        
        <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">loadNodeModulesSync</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="k">return</span> <span class="nx">n</span><span class="p">;</span>
        
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Cannot find module &#39;&quot;</span> <span class="o">+</span> <span class="nx">x</span> <span class="o">+</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">);</span>
        
        <span class="kd">function</span> <span class="nx">loadAsFileSync</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">[</span><span class="nx">x</span><span class="p">])</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">x</span><span class="p">;</span>
            <span class="p">}</span>
            
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">require</span><span class="p">.</span><span class="nx">extensions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">ext</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">extensions</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">[</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">ext</span><span class="p">])</span> <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">ext</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        
        <span class="kd">function</span> <span class="nx">loadAsDirectorySync</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\/+$/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">pkgfile</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="s1">&#39;/package.json&#39;</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">[</span><span class="nx">pkgfile</span><span class="p">])</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">pkg</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">[</span><span class="nx">pkgfile</span><span class="p">]();</span>
                <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">pkg</span><span class="p">.</span><span class="nx">browserify</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">b</span> <span class="o">===</span> <span class="s1">&#39;object&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">main</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">loadAsFileSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">b</span><span class="p">.</span><span class="nx">main</span><span class="p">));</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="k">return</span> <span class="nx">m</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">b</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">loadAsFileSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">b</span><span class="p">));</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="k">return</span> <span class="nx">m</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">pkg</span><span class="p">.</span><span class="nx">main</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">loadAsFileSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">pkg</span><span class="p">.</span><span class="nx">main</span><span class="p">));</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="k">return</span> <span class="nx">m</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            
            <span class="k">return</span> <span class="nx">loadAsFileSync</span><span class="p">(</span><span class="nx">x</span> <span class="o">+</span> <span class="s1">&#39;/index&#39;</span><span class="p">);</span>
        <span class="p">}</span>
        
        <span class="kd">function</span> <span class="nx">loadNodeModulesSync</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">start</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">dirs</span> <span class="o">=</span> <span class="nx">nodeModulesPathsSync</span><span class="p">(</span><span class="nx">start</span><span class="p">);</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">dirs</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">dir</span> <span class="o">=</span> <span class="nx">dirs</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">loadAsFileSync</span><span class="p">(</span><span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">x</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="k">return</span> <span class="nx">m</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">loadAsDirectorySync</span><span class="p">(</span><span class="nx">dir</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nx">x</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="k">return</span> <span class="nx">n</span><span class="p">;</span>
            <span class="p">}</span>
            
            <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">loadAsFileSync</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="k">return</span> <span class="nx">m</span><span class="p">;</span>
        <span class="p">}</span>
        
        <span class="kd">function</span> <span class="nx">nodeModulesPathsSync</span> <span class="p">(</span><span class="nx">start</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">parts</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">start</span> <span class="o">===</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="nx">parts</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;&#39;</span> <span class="p">];</span>
            <span class="k">else</span> <span class="nx">parts</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">normalize</span><span class="p">(</span><span class="nx">start</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>
            
            <span class="kd">var</span> <span class="nx">dirs</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">parts</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;node_modules&#39;</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">dir</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;/node_modules&#39;</span><span class="p">;</span>
                <span class="nx">dirs</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">dir</span><span class="p">);</span>
            <span class="p">}</span>
            
            <span class="k">return</span> <span class="nx">dirs</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">})();</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">alias</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">path</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="nx">res</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">from</span> <span class="o">+</span> <span class="s1">&#39;/package.json&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">res</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">basedir</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">dirname</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
    
    <span class="kd">var</span> <span class="nx">keys</span> <span class="o">=</span> <span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span> <span class="o">||</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">)</span> <span class="nx">res</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>
        <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
    <span class="p">})(</span><span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">);</span>
    
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">keys</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">key</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">basedir</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">===</span> <span class="nx">basedir</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">key</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">basedir</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
            <span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">[</span><span class="nx">to</span> <span class="o">+</span> <span class="nx">f</span><span class="p">]</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">[</span><span class="nx">basedir</span> <span class="o">+</span> <span class="nx">f</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">key</span> <span class="o">===</span> <span class="nx">basedir</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">[</span><span class="nx">to</span><span class="p">]</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">[</span><span class="nx">basedir</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">define</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">dirname</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">_core</span><span class="p">[</span><span class="nx">filename</span><span class="p">]</span>
        <span class="o">?</span> <span class="s1">&#39;&#39;</span>
        <span class="o">:</span> <span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">path</span><span class="p">().</span><span class="nx">dirname</span><span class="p">(</span><span class="nx">filename</span><span class="p">)</span>
    <span class="p">;</span>
    
    <span class="kd">var</span> <span class="nx">require_</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">require</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">dirname</span><span class="p">)</span>
    <span class="p">};</span>
    <span class="nx">require_</span><span class="p">.</span><span class="nx">resolve</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">dirname</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">require_</span><span class="p">.</span><span class="nx">modules</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">;</span>
    <span class="nx">require_</span><span class="p">.</span><span class="nx">define</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">define</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">module_</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">exports</span> <span class="o">:</span> <span class="p">{}</span> <span class="p">};</span>
    
    <span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">[</span><span class="nx">filename</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">[</span><span class="nx">filename</span><span class="p">].</span><span class="nx">_cached</span> <span class="o">=</span> <span class="nx">module_</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
        <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span>
            <span class="nx">module_</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span>
            <span class="nx">require_</span><span class="p">,</span>
            <span class="nx">module_</span><span class="p">,</span>
            <span class="nx">module_</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span>
            <span class="nx">dirname</span><span class="p">,</span>
            <span class="nx">filename</span>
        <span class="p">);</span>
        <span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">[</span><span class="nx">filename</span><span class="p">].</span><span class="nx">_cached</span> <span class="o">=</span> <span class="nx">module_</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">module_</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">};</span>

<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">process</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="nx">process</span> <span class="o">=</span> <span class="p">{};</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">process</span><span class="p">.</span><span class="nx">nextTick</span><span class="p">)</span> <span class="nx">process</span><span class="p">.</span><span class="nx">nextTick</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">queue</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">var</span> <span class="nx">canPost</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nb">window</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span>
        <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">postMessage</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span>
    <span class="p">;</span>
    
    <span class="k">if</span> <span class="p">(</span><span class="nx">canPost</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">ev</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">ev</span><span class="p">.</span><span class="nx">source</span> <span class="o">===</span> <span class="nb">window</span> <span class="o">&amp;&amp;</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">data</span> <span class="o">===</span> <span class="s1">&#39;browserify-tick&#39;</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">ev</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">fn</span> <span class="o">=</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
                    <span class="nx">fn</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">canPost</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">queue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
            <span class="nb">window</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="s1">&#39;browserify-tick&#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">};</span>
<span class="p">})();</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">process</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span> <span class="nx">process</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="s1">&#39;browser&#39;</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">process</span><span class="p">.</span><span class="nx">binding</span><span class="p">)</span> <span class="nx">process</span><span class="p">.</span><span class="nx">binding</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;evals&#39;</span><span class="p">)</span> <span class="k">return</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;vm&#39;</span><span class="p">)</span>
    <span class="k">else</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;No such module&#39;</span><span class="p">)</span>
<span class="p">};</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">process</span><span class="p">.</span><span class="nx">cwd</span><span class="p">)</span> <span class="nx">process</span><span class="p">.</span><span class="nx">cwd</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="s1">&#39;.&#39;</span> <span class="p">};</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">)</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span> <span class="o">=</span> <span class="p">{};</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">process</span><span class="p">.</span><span class="nx">argv</span><span class="p">)</span> <span class="nx">process</span><span class="p">.</span><span class="nx">argv</span> <span class="o">=</span> <span class="p">[];</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="nb">Function</span><span class="p">(</span>
    <span class="p">[</span> <span class="s1">&#39;require&#39;</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="s1">&#39;exports&#39;</span><span class="p">,</span> <span class="s1">&#39;__dirname&#39;</span><span class="p">,</span> <span class="s1">&#39;__filename&#39;</span> <span class="p">],</span>
    <span class="s2">&quot;function filter (xs, fn) {\n    var res = [];\n    for (var i = 0; i &lt; xs.length; i++) {\n        if (fn(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up &gt; 0\n  var up = 0;\n  for (var i = parts.length; i &gt;= 0; i--) {\n    var last = parts[i];\n    if (last == &#39;.&#39;) {\n      parts.splice(i, 1);\n    } else if (last === &#39;..&#39;) {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift(&#39;..&#39;);\n    }\n  }\n\n  return parts;\n}\n\n// Regex to split a filename into [*, dir, basename, ext]\n// posix version\nvar splitPathRe = /^(.+\\/(?!$)|\\/)?((?:.+?)?(\\.[^.]*)?)$/;\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\nvar resolvedPath = &#39;&#39;,\n    resolvedAbsolute = false;\n\nfor (var i = arguments.length; i &gt;= -1 &amp;&amp; !resolvedAbsolute; i--) {\n  var path = (i &gt;= 0)\n      ? arguments[i]\n      : process.cwd();\n\n  // Skip empty and invalid entries\n  if (typeof path !== &#39;string&#39; || !path) {\n    continue;\n  }\n\n  resolvedPath = path + &#39;/&#39; + resolvedPath;\n  resolvedAbsolute = path.charAt(0) === &#39;/&#39;;\n}\n\n// At this point the path should be resolved to a full absolute path, but\n// handle relative paths to be safe (might happen when process.cwd() fails)\n\n// Normalize the path\nresolvedPath = normalizeArray(filter(resolvedPath.split(&#39;/&#39;), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join(&#39;/&#39;);\n\n  return ((resolvedAbsolute ? &#39;/&#39; : &#39;&#39;) + resolvedPath) || &#39;.&#39;;\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\nvar isAbsolute = path.charAt(0) === &#39;/&#39;,\n    trailingSlash = path.slice(-1) === &#39;/&#39;;\n\n// Normalize the path\npath = normalizeArray(filter(path.split(&#39;/&#39;), function(p) {\n    return !!p;\n  }), !isAbsolute).join(&#39;/&#39;);\n\n  if (!path &amp;&amp; !isAbsolute) {\n    path = &#39;.&#39;;\n  }\n  if (path &amp;&amp; trailingSlash) {\n    path += &#39;/&#39;;\n  }\n  \n  return (isAbsolute ? &#39;/&#39; : &#39;&#39;) + path;\n};\n\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    return p &amp;&amp; typeof p === &#39;string&#39;;\n  }).join(&#39;/&#39;));\n};\n\n\nexports.dirname = function(path) {\n  var dir = splitPathRe.exec(path)[1] || &#39;&#39;;\n  var isWindows = false;\n  if (!dir) {\n    // No dirname\n    return &#39;.&#39;;\n  } else if (dir.length === 1 ||\n      (isWindows &amp;&amp; dir.length &lt;= 3 &amp;&amp; dir.charAt(1) === &#39;:&#39;)) {\n    // It is just a slash or a drive letter with a slash\n    return dir;\n  } else {\n    // It is a full dirname, strip trailing slash\n    return dir.substring(0, dir.length - 1);\n  }\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPathRe.exec(path)[2] || &#39;&#39;;\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext &amp;&amp; f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPathRe.exec(path)[3] || &#39;&#39;;\n};\n\n//@ sourceURL=path&quot;</span>
<span class="p">));</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s2">&quot;/node_modules/ncore/package.json&quot;</span><span class="p">,</span> <span class="nb">Function</span><span class="p">(</span>
    <span class="p">[</span> <span class="s1">&#39;require&#39;</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="s1">&#39;exports&#39;</span><span class="p">,</span> <span class="s1">&#39;__dirname&#39;</span><span class="p">,</span> <span class="s1">&#39;__filename&#39;</span> <span class="p">],</span>
    <span class="s2">&quot;module.exports = {\&quot;main\&quot;:\&quot;lib/core\&quot;}\n//@ sourceURL=/node_modules/ncore/package.json&quot;</span>
<span class="p">));</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s2">&quot;/node_modules/ncore/lib/core.js&quot;</span><span class="p">,</span> <span class="nb">Function</span><span class="p">(</span>
    <span class="p">[</span> <span class="s1">&#39;require&#39;</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="s1">&#39;exports&#39;</span><span class="p">,</span> <span class="s1">&#39;__dirname&#39;</span><span class="p">,</span> <span class="s1">&#39;__filename&#39;</span> <span class="p">],</span>
    <span class="s2">&quot;var pd = require(\&quot;pd\&quot;),\n    bindAll = pd.bindAll,\n    extend = pd.extend,\n    EventEmitter = require(\&quot;events\&quot;).EventEmitter.prototype\n\nmodule.exports = {\n    /*\n        Construct a new core instance. Supply the original dependencies hash\n            to set up the dependency mapping for the core\n\n        @param {Object} dependencies - This is a map of dependencies\n    */\n    constructor: function (dependencies) {\n        this.proxies = {}\n        this._modules = {}\n        this._interfaces = {}\n        this.dependencies = dependencies || {}\n        return this\n    },\n    /*\n        Store a module in the core. \n\n        @param {String} name - name of module, used in dependency mapping\n\n        @param {Object} module - the implementation of the module\n\n        @return {Object} proxy - the public proxy of the module\n    */\n    add: function (name, module) {\n        var _interface = makeInterface(this, name, module),\n            proxy = makeProxy(this, name, _interface)\n\n        extend(module, {\n            emit: proxy.emit\n        })\n\n        this._modules[name] = module\n        this._interfaces[name] = _interface\n        this.proxies[name] = proxy\n\n        return proxy\n    },\n    /*\n        initializes all modules, it does so by injecting dependencies and\n            then calling setup on all modules\n\n        @param {Function} [callback] - optional callback to be invoked when\n            all modules finish setup.\n    */\n    init: function (callback) {\n        var self = this,\n            modules = self._modules,\n            counter = 1\n\n        injectDependencies(this)\n        setupModules(this, callback)\n    }\n}\n\nfunction makeInterface(core, name, module) {\n    var _interface = {}\n    bindAll(module)\n    if (module.expose) {\n        module.expose.forEach(addToInterface)\n    } else {\n        extend(_interface, module)\n    }\n    return _interface\n\n    function addToInterface(name) {\n        _interface[name] = module[name]\n    }\n}\n\nfunction makeProxy(core, name, _interface) {\n    var proxy = bindAll({}, EventEmitter),\n        interfaces = core._interfaces\n\n    Object.keys(_interface).forEach(proxyProperty)\n\n    return proxy\n\n    function proxyProperty(key) {\n        if (typeof _interface[key] === \&quot;function\&quot;) {\n            proxy[key] = proxyFunction(key)\n        }\n    }\n\n    function proxyFunction(functionName) {\n        return proxy\n\n        function proxy() {\n            return interfaces[name][functionName].apply(null, arguments)\n        }\n    }\n}\n\nfunction injectDependencies(core) {\n    var modules = core._modules,\n        coreDependencies = core.dependencies,\n        proxies = core.proxies\n\n    Object.keys(modules).forEach(injectDependencies)\n\n    function injectDependencies(name) {\n        var module = modules[name],\n            dependencies = coreDependencies[name],\n            deps = {}\n\n        if (dependencies) {\n            Object.keys(dependencies).forEach(mapToProxy)\n        }\n        extend(module, deps)\n\n        function mapToProxy(key) {\n            var dependency = dependencies[key]\n\n            if (typeof dependency === \&quot;string\&quot;) {\n                deps[key] = proxies[dependency]\n            } else if (Array.isArray(dependency)) {\n                deps[key] = dependency.map(returnProxy)\n            } else if (typeof dependency === \&quot;object\&quot;) {\n                deps[key] = {}\n                Object.keys(dependency).forEach(setProxyFromDependency)\n            }\n\n            function setProxyFromDependency(dependencyKey) {\n                deps[key][dependencyKey] = proxies[dependency[dependencyKey]]\n            }\n        }\n    }\n\n    function returnProxy(name) {\n        return proxies[name]\n    }\n}\n\nfunction setupModules(core, callback) {\n    var modules = core._modules,\n        counter = 1\n\n    Object.keys(modules).forEach(setupModules)\n    next()\n\n    function setupModules(name) {\n        var module = modules[name]\n\n        if (typeof module.setup === \&quot;function\&quot;) {\n            if (module.setup.length &gt;= 1) {\n                counter++\n            }\n            module.setup(next)\n        }\n    }\n\n    function next() {\n        if (--counter === 0) {\n            callback &amp;&amp; callback()\n            Object.keys(modules).forEach(invokeInit)\n        }\n    }\n\n    function invokeInit(name) {\n        var module = modules[name]\n        module.init &amp;&amp; module.init()\n    }\n}\n//@ sourceURL=/node_modules/ncore/lib/core.js&quot;</span>
<span class="p">));</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s2">&quot;/node_modules/pd/package.json&quot;</span><span class="p">,</span> <span class="nb">Function</span><span class="p">(</span>
    <span class="p">[</span> <span class="s1">&#39;require&#39;</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="s1">&#39;exports&#39;</span><span class="p">,</span> <span class="s1">&#39;__dirname&#39;</span><span class="p">,</span> <span class="s1">&#39;__filename&#39;</span> <span class="p">],</span>
    <span class="s2">&quot;module.exports = {\&quot;main\&quot;:\&quot;lib/pd\&quot;}\n//@ sourceURL=/node_modules/pd/package.json&quot;</span>
<span class="p">));</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s2">&quot;/node_modules/pd/lib/pd.js&quot;</span><span class="p">,</span> <span class="nb">Function</span><span class="p">(</span>
    <span class="p">[</span> <span class="s1">&#39;require&#39;</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="s1">&#39;exports&#39;</span><span class="p">,</span> <span class="s1">&#39;__dirname&#39;</span><span class="p">,</span> <span class="s1">&#39;__filename&#39;</span> <span class="p">],</span>
    <span class="s2">&quot;var slice = Array.prototype.slice\n\n/*\n    pd {\n        bindAll: function that binds all the methods of an object to the object\n        extend: function that extends the first argument with the rest\n        Name: returns a namespace(anyKey) -&gt; uniqueObject function\n        memoize: returns a memoized version of the function\n    }\n*/\nmodule.exports = {\n    bindAll: bindAll,\n    extend: extend,\n    Name: Name,\n    memoize: asyncMemoize\n}\n\n/*\n    Extend will extend the first parameter with any other parameters \n    passed in. Only the own property names will be extended into\n    the object\n\n    @param Object target - target to be extended\n    @arguments Array [target, ...] - the rest of the objects passed\n        in will extended into the target\n\n    @return Object - the target\n*/\nfunction extend(target) {\n    slice.call(arguments, 1).forEach(function(source) {\n        Object.getOwnPropertyNames(source).forEach(function (name) {\n            target[name] = source[name]\n        })\n    })\n    return target\n}\n\n/*\n    defines a namespace object. This hides a \&quot;privates\&quot; object on object \n    under the \&quot;key\&quot; namespace\n\n    @param Object object - object to hide a privates object on\n    @param Object key - key to hide it under\n\n    @author Gozala : https://gist.github.com/1269991\n\n    @return Object privates\n*/\nfunction namespace(object, key) {\n    var privates = Object.create(object),\n        valueOf = object.valueOf\n    \n    Object.defineProperty(object, \&quot;valueOf\&quot;, {\n        value: function(value) {\n            return value !== key ? valueOf.apply(this, arguments) : privates\n        },\n        writable: true,\n        configurable: true\n    })\n    \n    return privates\n}\n\n/*\n    Constructs a Name function, when given an object it will return a\n    privates object. \n\n    @author Gozala : https://gist.github.com/1269991\n\n    @return Function name\n*/\nfunction Name() {\n    var key = {}\n    return name\n    \n    function name(object) {\n        var privates = object.valueOf(key)\n        return privates !== object ? privates : namespace(object, key)\n    }\n}\n\n/*\n    bindAll binds all methods to have their context set to the object\n\n    @param Object obj - the object to bind methods on\n    @arguments Array [target, ...] - the rest of the objects passed\n        in will extended into the obj\n\n    @return Object - the bound object\n*/\nfunction bindAll(obj) {\n    extend.apply(null, arguments) \n    Object.keys(obj).filter(isMethod).forEach(bindMethods)\n    return obj\n    \n    function isMethod(name) {\n        return obj[name] &amp;&amp; obj[name].bind === isMethod.bind\n    }\n    \n    function bindMethods(name) {\n        obj[name] = obj[name].bind(obj)\n    }\n}\n\n/*\n    default hasher for memoize. Takes the first arguments and returns it\n        if it&#39;s a string, otherwise returns the string \&quot;void\&quot;\n\n    @param Any x - argument to hash on\n\n    @return String - a hash key\n*/\nfunction defaultHasher(x) { \n    if (typeof x === \&quot;object\&quot; || typeof x === \&quot;function\&quot; ||\n            typeof x === \&quot;undefined\&quot;\n    ) {\n        return \&quot;void\&quot;\n    }\n    return x.toString()\n}\n\n/*\n    memoizes asynchronous functions. The asynchronous function must have\n        a callback as a last argument, and that callback must be called.\n    \n    Memoization means that the function you pass in will only be called once\n        for every different type of argument. If the async function only\n        has a callback argument then it will only be called once. The \n        results of invocation are cached\n\n    @param Function fn - function to memoize\n    @param Object context - optional context for the function\n    @param Function hasher - optional custom hasher function. This will\n        be called on the arguments of the memoized function. The result\n        of the hasher will be the key the cached data will be stored under.\n\n    @return Function - the memoized function\n*/\nfunction asyncMemoize(fn, context, hasher) {\n    var caches = callProxy.cache = {},\n        callbackLists = {}\n\n    if (typeof context === \&quot;function\&quot;) {\n        hasher = context\n        context = null\n    }\n\n    if (typeof hasher === \&quot;undefined\&quot;) {\n        hasher = defaultHasher\n    }\n\n    return callProxy\n\n    function callProxy() {\n        var args = [].slice.call(arguments),\n            cb = args.pop(),\n            key = hasher.apply(null, args)\n\n        if (caches[key]) {\n            return typeof cb === \&quot;function\&quot; &amp;&amp; cb.apply(null, caches[key])\n        } else if (callbackLists[key]) {\n            return callbackLists[key].push(cb)\n        }\n\n        callbackLists[key] = [cb]\n\n        args.push(callbackProxy)\n\n        fn.apply(context, args)\n\n        function callbackProxy() {\n            caches[key] = arguments\n            var list = callbackLists[key]\n            delete callbackLists[key]\n            // it might undefined &gt;_&lt; if the callback is blocking\n            list &amp;&amp; list.forEach(function (cb) {\n                typeof cb === \&quot;function\&quot; &amp;&amp; cb.apply(this, caches[key])\n            }, this)\n        }\n    }\n}\n//@ sourceURL=/node_modules/pd/lib/pd.js&quot;</span>
<span class="p">));</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s2">&quot;events&quot;</span><span class="p">,</span> <span class="nb">Function</span><span class="p">(</span>
    <span class="p">[</span> <span class="s1">&#39;require&#39;</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="s1">&#39;exports&#39;</span><span class="p">,</span> <span class="s1">&#39;__dirname&#39;</span><span class="p">,</span> <span class="s1">&#39;__filename&#39;</span> <span class="p">],</span>
    <span class="s2">&quot;if (!process.EventEmitter) process.EventEmitter = function () {};\n\nvar EventEmitter = exports.EventEmitter = process.EventEmitter;\nvar isArray = typeof Array.isArray === &#39;function&#39;\n    ? Array.isArray\n    : function (xs) {\n        return Object.prototype.toString.call(xs) === &#39;[object Array]&#39;\n    }\n;\n\n// By default EventEmitters will print a warning if more than\n// 10 listeners are added to it. This is a useful default which\n// helps finding memory leaks.\n//\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nvar defaultMaxListeners = 10;\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!this._events) this._events = {};\n  this._events.maxListeners = n;\n};\n\n\nEventEmitter.prototype.emit = function(type) {\n  // If there is no &#39;error&#39; event listener then throw.\n  if (type === &#39;error&#39;) {\n    if (!this._events || !this._events.error ||\n        (isArray(this._events.error) &amp;&amp; !this._events.error.length))\n    {\n      if (arguments[1] instanceof Error) {\n        throw arguments[1]; // Unhandled &#39;error&#39; event\n      } else {\n        throw new Error(\&quot;Uncaught, unspecified &#39;error&#39; event.\&quot;);\n      }\n      return false;\n    }\n  }\n\n  if (!this._events) return false;\n  var handler = this._events[type];\n  if (!handler) return false;\n\n  if (typeof handler == &#39;function&#39;) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        var args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n    return true;\n\n  } else if (isArray(handler)) {\n    var args = Array.prototype.slice.call(arguments, 1);\n\n    var listeners = handler.slice();\n    for (var i = 0, l = listeners.length; i &lt; l; i++) {\n      listeners[i].apply(this, args);\n    }\n    return true;\n\n  } else {\n    return false;\n  }\n};\n\n// EventEmitter is defined in src/node_events.cc\n// EventEmitter.prototype.emit() is also defined there.\nEventEmitter.prototype.addListener = function(type, listener) {\n  if (&#39;function&#39; !== typeof listener) {\n    throw new Error(&#39;addListener only takes instances of Function&#39;);\n  }\n\n  if (!this._events) this._events = {};\n\n  // To avoid recursion in the case that type == \&quot;newListeners\&quot;! Before\n  // adding it to the listeners, first emit \&quot;newListeners\&quot;.\n  this.emit(&#39;newListener&#39;, type, listener);\n\n  if (!this._events[type]) {\n    // Optimize the case of one listener. Don&#39;t need the extra array object.\n    this._events[type] = listener;\n  } else if (isArray(this._events[type])) {\n\n    // Check for listener leak\n    if (!this._events[type].warned) {\n      var m;\n      if (this._events.maxListeners !== undefined) {\n        m = this._events.maxListeners;\n      } else {\n        m = defaultMaxListeners;\n      }\n\n      if (m &amp;&amp; m &gt; 0 &amp;&amp; this._events[type].length &gt; m) {\n        this._events[type].warned = true;\n        console.error(&#39;(node) warning: possible EventEmitter memory &#39; +\n                      &#39;leak detected. %d listeners added. &#39; +\n                      &#39;Use emitter.setMaxListeners() to increase limit.&#39;,\n                      this._events[type].length);\n        console.trace();\n      }\n    }\n\n    // If we&#39;ve already got an array, just append.\n    this._events[type].push(listener);\n  } else {\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  var self = this;\n  self.on(type, function g() {\n    self.removeListener(type, g);\n    listener.apply(this, arguments);\n  });\n\n  return this;\n};\n\nEventEmitter.prototype.removeListener = function(type, listener) {\n  if (&#39;function&#39; !== typeof listener) {\n    throw new Error(&#39;removeListener only takes instances of Function&#39;);\n  }\n\n  // does not use listeners(), so no side effect of creating _events[type]\n  if (!this._events || !this._events[type]) return this;\n\n  var list = this._events[type];\n\n  if (isArray(list)) {\n    var i = list.indexOf(listener);\n    if (i &lt; 0) return this;\n    list.splice(i, 1);\n    if (list.length == 0)\n      delete this._events[type];\n  } else if (this._events[type] === listener) {\n    delete this._events[type];\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  // does not use listeners(), so no side effect of creating _events[type]\n  if (type &amp;&amp; this._events &amp;&amp; this._events[type]) this._events[type] = null;\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  if (!this._events) this._events = {};\n  if (!this._events[type]) this._events[type] = [];\n  if (!isArray(this._events[type])) {\n    this._events[type] = [this._events[type]];\n  }\n  return this._events[type];\n};\n\n//@ sourceURL=events&quot;</span>
<span class="p">));</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s2">&quot;/foo.js&quot;</span><span class="p">,</span> <span class="nb">Function</span><span class="p">(</span>
    <span class="p">[</span> <span class="s1">&#39;require&#39;</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="s1">&#39;exports&#39;</span><span class="p">,</span> <span class="s1">&#39;__dirname&#39;</span><span class="p">,</span> <span class="s1">&#39;__filename&#39;</span> <span class="p">],</span>
    <span class="s2">&quot;module.exports = {\n    init: function () {\n        typeof window !== \&quot;undefined\&quot; &amp;&amp; (window[\&quot;bar.bar\&quot;] = this.bar)\n        typeof window !== \&quot;undefined\&quot; &amp;&amp; (window[\&quot;bar.foo\&quot;] = this.foo)\n        typeof window !== \&quot;undefined\&quot; &amp;&amp; (window[\&quot;baz\&quot;] = this.baz)\n    },\n    has: function (name) {\n        return this[name];\n    },\n    expose: [\&quot;has\&quot;]\n};\n//@ sourceURL=/foo.js&quot;</span>
<span class="p">));</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s2">&quot;/bar/bar.js&quot;</span><span class="p">,</span> <span class="nb">Function</span><span class="p">(</span>
    <span class="p">[</span> <span class="s1">&#39;require&#39;</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="s1">&#39;exports&#39;</span><span class="p">,</span> <span class="s1">&#39;__dirname&#39;</span><span class="p">,</span> <span class="s1">&#39;__filename&#39;</span> <span class="p">],</span>
    <span class="s2">&quot;module.exports = {\n    setup: function () {\n        typeof window !== \&quot;undefined\&quot; &amp;&amp; (window[\&quot;foo\&quot;] = this.foo)\n    },\n    has: function (name) {\n        return this[name]\n    },\n    expose: [\&quot;has\&quot;]\n};\n//@ sourceURL=/bar/bar.js&quot;</span>
<span class="p">));</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s2">&quot;/bar/foo.js&quot;</span><span class="p">,</span> <span class="nb">Function</span><span class="p">(</span>
    <span class="p">[</span> <span class="s1">&#39;require&#39;</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="s1">&#39;exports&#39;</span><span class="p">,</span> <span class="s1">&#39;__dirname&#39;</span><span class="p">,</span> <span class="s1">&#39;__filename&#39;</span> <span class="p">],</span>
    <span class="s2">&quot;module.exports = {\n    setup: function() {\n        typeof window !== \&quot;undefined\&quot; &amp;&amp; (window[\&quot;bar.foo\&quot;] = this)\n    },\n    has: function (name) {\n        return this[name]\n    },\n    expose: [\&quot;has\&quot;]\n};\n//@ sourceURL=/bar/foo.js&quot;</span>
<span class="p">));</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s2">&quot;/baz.js&quot;</span><span class="p">,</span> <span class="nb">Function</span><span class="p">(</span>
    <span class="p">[</span> <span class="s1">&#39;require&#39;</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="s1">&#39;exports&#39;</span><span class="p">,</span> <span class="s1">&#39;__dirname&#39;</span><span class="p">,</span> <span class="s1">&#39;__filename&#39;</span> <span class="p">],</span>
    <span class="s2">&quot;module.exports = {\n    has: function (name) {\n        return this[name];\n    }\n};\n//@ sourceURL=/baz.js&quot;</span>
<span class="p">));</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s2">&quot;/dummy.js&quot;</span><span class="p">,</span> <span class="nb">Function</span><span class="p">(</span>
    <span class="p">[</span> <span class="s1">&#39;require&#39;</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">,</span> <span class="s1">&#39;exports&#39;</span><span class="p">,</span> <span class="s1">&#39;__dirname&#39;</span><span class="p">,</span> <span class="s1">&#39;__filename&#39;</span> <span class="p">],</span>
    <span class="s2">&quot;(function () { \nvar ncore = require(&#39;ncore&#39;)\nvar Core = Object.create(ncore).constructor()\nCore.add(&#39;foo&#39;, require(&#39;./foo.js&#39;)) \nCore.add(&#39;bar.bar&#39;, require(&#39;./bar/bar.js&#39;)) \nCore.add(&#39;bar.foo&#39;, require(&#39;./bar/foo.js&#39;)) \nCore.add(&#39;baz&#39;, require(&#39;./baz.js&#39;)) \nCore.dependencies = {\&quot;foo\&quot;:{\&quot;bar\&quot;:\&quot;bar.bar\&quot;,\&quot;foo\&quot;:\&quot;bar.foo\&quot;,\&quot;baz\&quot;:\&quot;baz\&quot;},\&quot;bar.bar\&quot;:{\&quot;foo\&quot;:\&quot;foo\&quot;,\&quot;foobar\&quot;:\&quot;bar.bar\&quot;,\&quot;bars\&quot;:{\&quot;bar\&quot;:\&quot;bar.bar\&quot;,\&quot;foo\&quot;:\&quot;bar.foo\&quot;}},\&quot;bar.foo\&quot;:{\&quot;foo\&quot;:\&quot;foo\&quot;,\&quot;foobar\&quot;:\&quot;bar.foo\&quot;,\&quot;bars\&quot;:{\&quot;bar\&quot;:\&quot;bar.bar\&quot;,\&quot;foo\&quot;:\&quot;bar.foo\&quot;}}}\nCore.init()\n})()\n//@ sourceURL=/dummy.js&quot;</span>
<span class="p">));</span>
<span class="nx">require</span><span class="p">(</span><span class="s2">&quot;/dummy.js&quot;</span><span class="p">);</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
